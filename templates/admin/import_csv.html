{% extends "admin/base_site.html" %}
{% load i18n admin_urls static admin_modify %}

{% block title %}Importar Usuarios desde CSV | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
&rsaquo; <a href="{% url 'admin:app_list' app_label=opts.app_label %}">{{ opts.app_config.verbose_name }}</a>
&rsaquo; <a href="{% url opts|admin_urlname:'changelist' %}">{{ opts.verbose_name_plural|capfirst }}</a>
&rsaquo; {% trans 'Importar CSV' %}
</div>
{% endblock %}

{% block content %}
<h1>Importar Usuarios desde CSV</h1>

{% if messages %}
    <ul class="messagelist">
        {% for message in messages %}
            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
        {% endfor %}
    </ul>
{% endif %}

<div id="content-main">
    <form method="post" enctype="multipart/form-data" id="import-csv-form">
        {% csrf_token %}
        
        <div>
            <fieldset class="module aligned">
                <h2>Instrucciones</h2>
                <div class="form-row">
                    <p>El archivo CSV debe tener las siguientes columnas:</p>
                    <ul>
                        <li><strong>username</strong> (requerido) - Nombre de usuario único</li>
                        <li><strong>email</strong> (requerido) - Correo electrónico</li>
                        <li><strong>password</strong> (requerido) - Contraseña del usuario</li>
                        <li><strong>first_name</strong> (opcional) - Nombre</li>
                        <li><strong>last_name</strong> (opcional) - Apellido</li>
                        <li><strong>is_staff</strong> (opcional) - true/false - Acceso al admin</li>
                        <li><strong>is_superuser</strong> (opcional) - true/false - Superusuario</li>
                    </ul>
                </div>
                
                <div class="form-row">
                    <h3>Ejemplo de formato CSV:</h3>
                    <pre style="background: #f5f5f5; padding: 10px; border-radius: 4px;">
username,email,password,first_name,last_name,is_staff,is_superuser
juan.perez,juan@example.com,password123,Juan,Pérez,true,false
maria.garcia,maria@example.com,password456,Maria,García,false,false
admin,admin@example.com,admin123,Admin,User,true,true
                    </pre>
                </div>
                
                <div class="form-row">
                    <label for="id_csv_file">Archivo CSV:</label>
                    <input type="file" name="csv_file" id="id_csv_file" accept=".csv" required>
                    <p class="help">Selecciona un archivo CSV con los usuarios a importar.</p>
                </div>
            </fieldset>
            
            <div class="submit-row">
                <input type="submit" value="Importar Usuarios" class="default" name="_save">
                <a href="{% url opts|admin_urlname:'changelist' %}" class="button">Cancelar</a>
            </div>
        </div>
    </form>
</div>

<style>
    .form-row {
        margin-bottom: 20px;
    }
    .form-row label {
        display: block;
        font-weight: bold;
        margin-bottom: 5px;
    }
    .form-row input[type="file"] {
        padding: 5px;
        border: 1px solid #ddd;
        border-radius: 4px;
    }
    .form-row ul {
        margin-left: 20px;
    }
    .form-row pre {
        overflow-x: auto;
    }
</style>
{% endblock %}

